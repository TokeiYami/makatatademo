<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Makatata Smashburger</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background-color: #2b2b2b;
      color: white;
    }

    header {
      background-color: #1f1f1f;
      text-align: center;
      padding: 20px;
    }

    header img {
      height: 60px;
      vertical-align: middle;
      margin-right: 10px;
    }

    header h1 {
      display: inline-block;
      font-size: 2.5rem;
      margin: 0;
      color: #fdd835;
      vertical-align: middle;
    }

    .order-type {
      background-color: #1f1f1f;
      text-align: center;
      padding: 20px;
      border-bottom: 2px solid #fdd835;
    }

    .order-type h3 {
      color: #fdd835;
      margin: 0 0 15px 0;
    }

    .order-type-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .order-type-btn {
      background-color: #3a3a3a;
      color: white;
      border: 2px solid #555;
      padding: 12px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .order-type-btn:hover {
      background-color: #4a4a4a;
      border-color: #fdd835;
    }

    .order-type-btn.active {
      background-color: #fdd835;
      color: black;
      border-color: #fdd835;
    }

    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .bundles-section {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .bundles-section .menu-item {
      flex: 0 1 280px;
      max-width: 350px;
    }

    .menu-item {
      background-color: #3a3a3a;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
      transition: transform 0.2s ease;
    }

    .menu-item:hover {
      transform: translateY(-5px);
    }

    .menu-item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .menu-item h2 {
      color: #ffeb3b;
      margin: 15px 0 10px;
      font-size: 1.4rem;
    }

    .menu-item p {
      color: #ddd;
      font-size: 14px;
      min-height: 40px;
      margin: 10px 0;
    }

    .allergen-info {
      background: #2a2a2a;
      padding: 10px;
      border-radius: 6px;
      margin: 10px 0;
      text-align: left;
      font-size: 12px;
    }

    .allergen-info strong {
      color: #fdd835;
      display: block;
      margin-bottom: 5px;
    }

    .allergen-info ul {
      margin: 5px 0;
      padding-left: 20px;
    }

    .allergen-info li {
      color: #ccc;
      margin: 3px 0;
    }

    .allergen-info .traces {
      color: #999;
      font-style: italic;
      margin-top: 8px;
    }

    .menu-item .price {
      font-size: 1.3rem;
      font-weight: bold;
      color: #fff;
      margin: 15px 0;
    }

    .menu-item button {
      background-color: #fdd835;
      border: none;
      color: black;
      font-weight: bold;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
      font-size: 1rem;
    }

    .menu-item button:hover {
      background-color: #ffe85f;
    }

    .cart {
      background-color: #3a3a3a;
      padding: 25px;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      margin: 30px auto;
    }

    .cart h2 {
      text-align: center;
      color: #fdd835;
      margin-top: 0;
    }

    .order-info {
      background: #4a4a4a;
      padding: 12px;
      border-radius: 6px;
      margin-bottom: 20px;
      text-align: center;
      color: #fdd835;
      font-weight: bold;
    }

    #cart-items {
      list-style: none;
      padding: 0;
      margin: 20px 0;
      min-height: 50px;
    }

    #cart-items li {
      background: #4a4a4a;
      padding: 12px;
      margin: 8px 0;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .cart-item-info {
      flex: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-item-name {
      font-weight: bold;
    }

    .cart-item-quantity {
      color: #fdd835;
      font-weight: bold;
      margin: 0 10px;
    }

    .cart-item-controls {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    #cart-items li button {
      background: #ff4444;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      min-width: 30px;
    }

    #cart-items li button:hover {
      background: #ff6666;
    }

    #cart-items li button.qty-btn {
      background: #fdd835;
      color: black;
      font-weight: bold;
    }

    #cart-items li button.qty-btn:hover {
      background: #ffe85f;
    }

    #cart-total {
      text-align: right;
      font-size: 1.3rem;
      font-weight: bold;
      margin: 20px 0;
      color: #fdd835;
    }

    .checkout-btn {
      background-color: #fdd835;
      color: black;
      border: none;
      padding: 15px 30px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
      font-size: 1.1rem;
      display: block;
      width: 100%;
    }

    .checkout-btn:hover {
      background-color: #ffe85f;
    }

    .checkout-btn:disabled {
      background-color: #666;
      cursor: not-allowed;
      opacity: 0.5;
    }

    .confirmation-page {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #2b2b2b;
      z-index: 1000;
      overflow-y: auto;
    }

    .confirmation-page.active {
      display: block;
    }

    .confirmation-content {
      max-width: 800px;
      margin: 50px auto;
      padding: 40px;
      text-align: center;
    }

    .confirmation-header {
      background-color: #1f1f1f;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
    }

    .confirmation-header h1 {
      color: #fdd835;
      font-size: 2.5rem;
      margin: 0 0 15px 0;
    }

    .confirmation-header .status-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .confirmation-header .status-message {
      font-size: 1.3rem;
      color: #fff;
      margin: 15px 0;
    }

    .order-summary {
      background-color: #3a3a3a;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 20px;
      text-align: left;
    }

    .order-summary h2 {
      color: #fdd835;
      text-align: center;
      margin-top: 0;
    }

    .order-detail {
      background: #4a4a4a;
      padding: 12px;
      margin: 10px 0;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
    }

    .order-detail.type {
      background: #1f1f1f;
      font-weight: bold;
      color: #fdd835;
      font-size: 1.1rem;
    }

    .order-total {
      background: #fdd835;
      color: black;
      padding: 15px;
      margin: 20px 0;
      border-radius: 6px;
      font-size: 1.3rem;
      font-weight: bold;
    }

    .back-btn {
      background-color: #fdd835;
      color: black;
      border: none;
      padding: 15px 40px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1.1rem;
      margin-top: 20px;
      transition: 0.2s;
    }

    .back-btn:hover {
      background-color: #ffe85f;
    }

    .minigame-btn {
      background-color: #3a3a3a;
      color: #fdd835;
      border: 2px solid #fdd835;
      padding: 15px 40px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1.1rem;
      margin-top: 20px;
      margin-left: 15px;
      transition: 0.2s;
    }

    .minigame-btn:hover {
      background-color: #fdd835;
      color: black;
    }

    .minigame-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      z-index: 2000;
      overflow-y: auto;
      padding: 20px;
    }

    .minigame-overlay.active {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .minigame-container {
      background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
      padding: 2em;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      text-align: center;
      max-width: 700px;
      width: 100%;
    }

    .minigame-close {
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin-bottom: 1em;
      transition: 0.2s;
    }

    .minigame-close:hover {
      background: #ff6666;
    }

    #minigame-score {
      font-size: 2em;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 1em;
    }

    #minigame-area {
      position: relative;
      width: 100%;
      max-width: 600px;
      height: 200px;
      background: linear-gradient(180deg, #a8daff 0%, #7ec8ff 100%);
      border-radius: 10px;
      overflow: hidden;
      margin: 0 auto;
    }

    #minigame-ground {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 60px;
      background: #90EE90;
      border-top: 4px solid #228B22;
    }

    #minigame-player {
      position: absolute;
      bottom: 60px;
      left: 80px;
      font-size: 3em;
      transition: bottom 0.3s ease-in-out;
    }

    .minigame-obstacle {
      position: absolute;
      bottom: 60px;
      font-size: 3em;
    }

    #minigame-over {
      display: none;
      margin-top: 2em;
    }

    #minigame-over h2 {
      font-size: 2em;
      color: #e74c3c;
      margin-bottom: 0.5em;
    }

    #minigame-restart {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 1em 3em;
      font-size: 1.2em;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s;
    }

    #minigame-restart:hover {
      transform: scale(1.05);
    }

    #minigame-instructions {
      margin-top: 1em;
      color: #2c3e50;
      font-size: 1.1em;
      font-weight: bold;
    }

    .empty-cart {
      text-align: center;
      color: #999;
      padding: 20px;
    }

    @media (max-width: 768px) {
      .menu {
        grid-template-columns: 1fr;
        padding: 15px;
      }

      header h1 {
        font-size: 1.8rem;
      }

      header img {
        height: 50px;
      }

      .menu-item {
        width: 100%;
      }

      .order-type-buttons {
        flex-direction: column;
        align-items: center;
      }

      .order-type-btn {
        width: 80%;
        max-width: 300px;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="images/logo.jpg" alt="Makatata Smashburger Logo" />
    <h1>Makatata Smashburger</h1>
  </header>

  <section class="order-type">
    <h3>Choose Order Type</h3>
    <div class="order-type-buttons">
      <button class="order-type-btn" data-type="dine-in">🍽️ Dine-In</button>
      <button class="order-type-btn" data-type="takeout">🥡 Takeout</button>
      <button class="order-type-btn" data-type="delivery">🚚 Delivery</button>
    </div>
  </section>

  <section class="menu">
    <div class="menu-item" data-price="150">
      <img src="images/sing.jpg" alt="Single Smashburger" />
      <h2>Single Smashburger</h2>
      <p>Juicy single patty with cheese, veggies, and signature sauce.</p>
      <div class="allergen-info">
        <strong>Possible Allergens:</strong>
        <ul>
          <li>Gluten</li>
          <li>Dairy</li>
          <li>Eggs</li>
          <li>Soy</li>
          <li>Sesame</li>
        </ul>
        <div class="traces">May contain traces of: mustard, sulfites.</div>
      </div>
      <div class="price">₱150.00</div>
      <button>Add to Cart</button>
    </div>

    <div class="menu-item" data-price="220">
      <img src="images/double.jpg" alt="Double Smashburger" />
      <h2>Double Smashburger</h2>
      <p>Two smashed patties stacked with cheese and signature sauce.</p>
      <div class="allergen-info">
        <strong>Possible Allergens:</strong>
        <ul>
          <li>Gluten</li>
          <li>Dairy</li>
          <li>Eggs</li>
          <li>Soy</li>
          <li>Sesame</li>
        </ul>
        <div class="traces">May contain traces of: mustard, sulfites.</div>
      </div>
      <div class="price">₱220.00</div>
      <button>Add to Cart</button>
    </div>

    <div class="menu-item" data-price="170">
      <img src="images/crazy.jpg" alt="Crazy Fries" />
      <h2>Crazy Fries</h2>
      <p>Fries topped with chopped patty and signature sauce.</p>
      <div class="allergen-info">
        <strong>Possible Allergens:</strong>
        <ul>
          <li>Dairy</li>
          <li>Soy</li>
          <li>Eggs</li>
          <li>Gluten</li>
        </ul>
        <div class="traces">May contain traces of: wheat, mustard.</div>
      </div>
      <div class="price">₱170.00</div>
      <button>Add to Cart</button>
    </div>

    <div class="menu-item" data-price="65">
      <img src="images/icedtea.png" alt="Iced Tea" />
      <h2>Iced Tea</h2>
      <p>Refreshing, perfectly brewed iced tea.</p>
      <div class="allergen-info">
        <strong>Allergen Information:</strong>
        <ul>
          <li>None - suitable for most dietary restrictions</li>
        </ul>
        <div class="traces">May be processed in facility with allergens.</div>
      </div>
      <div class="price">₱65.00</div>
      <button>Add to Cart</button>
    </div>
  </section>

  <section class="bundles-section">
    <div class="menu-item" data-price="260">
      <img src="images/bundleone.jpg" alt="Bundle 1" onerror="this.src='images/sing.jpg'" />
      <h2>Bundle 1 - Single Combo</h2>
      <p>Single Smashburger + Plain Fries + Iced Tea. Perfect meal deal!</p>
      <div class="allergen-info">
        <strong>Possible Allergens:</strong>
        <ul>
          <li>Gluten</li>
          <li>Dairy</li>
          <li>Eggs</li>
          <li>Soy</li>
          <li>Sesame</li>
        </ul>
        <div class="traces">May contain traces of: mustard, sulfites, wheat.</div>
      </div>
      <div class="price">₱260.00</div>
      <button>Add to Cart</button>
    </div>

    <div class="menu-item" data-price="330">
      <img src="images/bundletwo.jpg" alt="Bundle 2" onerror="this.src='images/double.jpg'" />
      <h2>Bundle 2 - Double Combo</h2>
      <p>Double Smashburger + Plain Fries + Iced Tea. Ultimate value meal!</p>
      <div class="allergen-info">
        <strong>Possible Allergens:</strong>
        <ul>
          <li>Gluten</li>
          <li>Dairy</li>
          <li>Eggs</li>
          <li>Soy</li>
          <li>Sesame</li>
        </ul>
        <div class="traces">May contain traces of: mustard, sulfites, wheat.</div>
      </div>
      <div class="price">₱330.00</div>
      <button>Add to Cart</button>
    </div>
  </section>

  <section class="cart">
    <h2>Your Cart</h2>
    <div class="order-info" id="order-info">Please select an order type above</div>
    <ul id="cart-items">
      <li class="empty-cart">Your cart is empty</li>
    </ul>
    <div id="cart-total">Total: ₱0.00</div>
    <button class="checkout-btn" disabled>Checkout</button>
  </section>

  <!-- Confirmation Page -->
  <div class="confirmation-page" id="confirmation-page">
    <header>
      <img src="images/logo.jpg" alt="Makatata Smashburger Logo" />
      <h1>Makatata Smashburger</h1>
    </header>
    
    <div class="confirmation-content">
      <div class="confirmation-header">
        <div class="status-icon" id="status-icon">✅</div>
        <h1>Thank You!</h1>
        <div class="status-message" id="status-message"></div>
      </div>

      <div class="order-summary">
        <h2>Order Summary</h2>
        <div class="order-detail type" id="order-type-display"></div>
        <div id="order-items-display"></div>
        <div class="order-total" id="order-total-display"></div>
      </div>

      <button class="back-btn" onclick="backToMenu()">Back to Menu</button>
      <button class="minigame-btn" onclick="openMinigame()">🎮 Play While Waiting</button>
    </div>
  </div>

  <!-- Minigame Overlay -->
  <div class="minigame-overlay" id="minigame-overlay">
    <div class="minigame-container">
      <button class="minigame-close" onclick="closeMinigame()">✕ Close Game</button>
      <div id="minigame-score">🍔 Score: 0</div>
      <div id="minigame-area">
        <div id="minigame-player">🍔</div>
        <div id="minigame-ground"></div>
      </div>
      <div id="minigame-instructions">Press SPACE or TAP to jump!</div>
      <div id="minigame-over">
        <h2>💥 GAME OVER! 💥</h2>
        <button id="minigame-restart">Play Again 🍔</button>
      </div>
    </div>
  </div>

  <script>
    const orderTypeButtons = document.querySelectorAll('.order-type-btn');
    const menuButtons = document.querySelectorAll('.menu-item button');
    const cartList = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const orderInfo = document.getElementById('order-info');
    const checkoutBtn = document.querySelector('.checkout-btn');
    
    let cart = {};
    let total = 0;
    let selectedOrderType = null;

    // Order type selection
    orderTypeButtons.forEach(button => {
      button.addEventListener('click', () => {
        orderTypeButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        selectedOrderType = button.getAttribute('data-type');
        
        const typeLabels = {
          'dine-in': '🍽️ Dine-In',
          'takeout': '🥡 Takeout',
          'delivery': '🚚 Delivery'
        };
        
        orderInfo.textContent = `Order Type: ${typeLabels[selectedOrderType]}`;
        checkoutBtn.disabled = Object.keys(cart).length === 0;
      });
    });

    function updateCart() {
      cartList.innerHTML = '';
      
      if (Object.keys(cart).length === 0) {
        cartList.innerHTML = '<li class="empty-cart">Your cart is empty</li>';
        total = 0;
        checkoutBtn.disabled = true;
      } else {
        Object.keys(cart).forEach(itemName => {
          const item = cart[itemName];
          const listItem = document.createElement('li');
          listItem.innerHTML = `
            <div class="cart-item-info">
              <span class="cart-item-name">${itemName}</span>
              <span class="cart-item-quantity">${item.quantity}x</span>
            </div>
            <div class="cart-item-controls">
              <button class="qty-btn" onclick="decreaseQuantity('${itemName}')">-</button>
              <button class="qty-btn" onclick="increaseQuantity('${itemName}')">+</button>
              <button onclick="removeItem('${itemName}')">Remove</button>
            </div>
          `;
          cartList.appendChild(listItem);
        });
        
        total = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
        checkoutBtn.disabled = !selectedOrderType;
      }
      
      cartTotal.textContent = `Total: ₱${total.toFixed(2)}`;
    }

    function removeItem(itemName) {
      delete cart[itemName];
      updateCart();
    }

    function increaseQuantity(itemName) {
      cart[itemName].quantity++;
      updateCart();
    }

    function decreaseQuantity(itemName) {
      if (cart[itemName].quantity > 1) {
        cart[itemName].quantity--;
      } else {
        delete cart[itemName];
      }
      updateCart();
    }

    menuButtons.forEach(button => {
      button.addEventListener('click', () => {
        const item = button.parentElement;
        const name = item.querySelector('h2').textContent;
        const price = parseFloat(item.getAttribute('data-price'));

        if (cart[name]) {
          cart[name].quantity++;
        } else {
          cart[name] = { price: price, quantity: 1 };
        }
        
        updateCart();
        
        button.textContent = 'Added!';
        button.style.backgroundColor = '#4CAF50';
        setTimeout(() => {
          button.textContent = 'Add to Cart';
          button.style.backgroundColor = '#fdd835';
        }, 500);
      });
    });

    checkoutBtn.addEventListener('click', () => {
      if (!selectedOrderType) {
        alert('Please select an order type (Dine-In, Takeout, or Delivery)');
        return;
      }
      
      if (total > 0) {
        showConfirmationPage();
      } else {
        alert('Your cart is empty!');
      }
    });

    function showConfirmationPage() {
      const typeLabels = {
        'dine-in': '🍽️ Dine-In',
        'takeout': '🥡 Takeout',
        'delivery': '🚚 Delivery'
      };

      const statusMessages = {
        'dine-in': 'Your order is being prepared! Please proceed to the counter.',
        'takeout': 'Your order is being prepared! We\'ll notify you when it\'s ready for pickup.',
        'delivery': 'Your order is on the way! Our rider will deliver it shortly.'
      };

      // Update status message
      document.getElementById('status-message').textContent = statusMessages[selectedOrderType];

      // Update order type display
      document.getElementById('order-type-display').textContent = `Order Type: ${typeLabels[selectedOrderType]}`;

      // Update order items
      const orderItemsDisplay = document.getElementById('order-items-display');
      orderItemsDisplay.innerHTML = '';
      
      Object.keys(cart).forEach(name => {
        const item = cart[name];
        const itemDiv = document.createElement('div');
        itemDiv.className = 'order-detail';
        itemDiv.innerHTML = `
          <span>${name} (${item.quantity}x)</span>
          <span>₱${(item.price * item.quantity).toFixed(2)}</span>
        `;
        orderItemsDisplay.appendChild(itemDiv);
      });

      // Update total
      document.getElementById('order-total-display').textContent = `Total: ₱${total.toFixed(2)}`;

      // Show confirmation page
      document.getElementById('confirmation-page').classList.add('active');
    }

    function backToMenu() {
      document.getElementById('confirmation-page').classList.remove('active');
      cart = {};
      selectedOrderType = null;
      orderTypeButtons.forEach(btn => btn.classList.remove('active'));
      orderInfo.textContent = 'Please select an order type above';
      updateCart();
    }

    window.removeItem = removeItem;
    window.increaseQuantity = increaseQuantity;
    window.decreaseQuantity = decreaseQuantity;
    window.backToMenu = backToMenu;

    // Minigame functionality
    let miniGameActive = false;
    let isJumping = false;
    let gameScore = 0;
    let obstacleSpeed = 5;
    let spawnInterval = 2000;
    let spawnLoop;

    function openMinigame() {
      document.getElementById('minigame-overlay').classList.add('active');
      startMinigame();
    }

    function closeMinigame() {
      document.getElementById('minigame-overlay').classList.remove('active');
      endMinigame();
    }

    function startMinigame() {
      miniGameActive = true;
      gameScore = 0;
      obstacleSpeed = 5;
      spawnInterval = 2000;
      document.getElementById('minigame-score').textContent = '🍔 Score: 0';
      document.getElementById('minigame-over').style.display = 'none';
      document.getElementById('minigame-instructions').style.display = 'block';
      document.getElementById('minigame-player').style.bottom = '60px';
      isJumping = false;

      const obstacles = document.querySelectorAll('.minigame-obstacle');
      obstacles.forEach(obs => obs.remove());

      spawnLoop = setInterval(createObstacle, spawnInterval);
    }

    function endMinigame() {
      miniGameActive = false;
      clearInterval(spawnLoop);
      const obstacles = document.querySelectorAll('.minigame-obstacle');
      obstacles.forEach(obs => obs.remove());
    }

    function jump() {
      if (isJumping || !miniGameActive) return;
      
      isJumping = true;
      const player = document.getElementById('minigame-player');
      player.style.bottom = '180px';
      
      setTimeout(() => {
        player.style.bottom = '60px';
        setTimeout(() => {
          isJumping = false;
        }, 300);
      }, 500);
    }

    function createObstacle() {
      if (!miniGameActive) return;
      
      const obstacle = document.createElement('div');
      obstacle.className = 'minigame-obstacle';
      obstacle.textContent = '🚗';
      obstacle.style.right = '-60px';
      document.getElementById('minigame-area').appendChild(obstacle);
      
      const moveObstacle = setInterval(() => {
        if (!miniGameActive) {
          clearInterval(moveObstacle);
          return;
        }
        
        const obstacleRight = parseInt(window.getComputedStyle(obstacle).right);
        
        if (obstacleRight > 600) {
          obstacle.remove();
          clearInterval(moveObstacle);
          gameScore++;
          document.getElementById('minigame-score').textContent = `🍔 Score: ${gameScore}`;
          
          if (gameScore % 5 === 0 && obstacleSpeed < 10) {
            obstacleSpeed += 0.5;
          }
          if (gameScore % 3 === 0 && spawnInterval > 1000) {
            spawnInterval -= 100;
            clearInterval(spawnLoop);
            spawnLoop = setInterval(createObstacle, spawnInterval);
          }
        } else {
          obstacle.style.right = (obstacleRight + obstacleSpeed) + 'px';
        }
        
        const player = document.getElementById('minigame-player');
        const playerRect = player.getBoundingClientRect();
        const obstacleRect = obstacle.getBoundingClientRect();
        
        const playerHitbox = {
          left: playerRect.left + (playerRect.width * 0.3),
          right: playerRect.right - (playerRect.width * 0.3),
          top: playerRect.top + (playerRect.height * 0.3),
          bottom: playerRect.bottom - (playerRect.height * 0.3)
        };
        
        const obstacleHitbox = {
          left: obstacleRect.left + (obstacleRect.width * 0.3),
          right: obstacleRect.right - (obstacleRect.width * 0.3),
          top: obstacleRect.top + (obstacleRect.height * 0.3),
          bottom: obstacleRect.bottom - (obstacleRect.height * 0.3)
        };
        
        if (
          playerHitbox.left < obstacleHitbox.right &&
          playerHitbox.right > obstacleHitbox.left &&
          playerHitbox.top < obstacleHitbox.bottom &&
          playerHitbox.bottom > obstacleHitbox.top
        ) {
          gameOver();
        }
      }, 20);
    }

    function gameOver() {
      miniGameActive = false;
      document.getElementById('minigame-over').style.display = 'block';
      document.getElementById('minigame-instructions').style.display = 'none';
      clearInterval(spawnLoop);
      
      const obstacles = document.querySelectorAll('.minigame-obstacle');
      obstacles.forEach(obs => obs.remove());
    }

    function restartMinigame() {
      startMinigame();
    }

    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' && miniGameActive) {
        e.preventDefault();
        jump();
      }
    });

    const minigameArea = document.getElementById('minigame-area');
    if (minigameArea) {
      minigameArea.addEventListener('click', jump);
      minigameArea.addEventListener('touchstart', (e) => {
        e.preventDefault();
        jump();
      });
    }

    const restartBtn = document.getElementById('minigame-restart');
    if (restartBtn) {
      restartBtn.addEventListener('click', restartMinigame);
    }

    window.openMinigame = openMinigame;
    window.closeMinigame = closeMinigame;
  </script>
</body>
</html>